# TS å…¥é—¨

[æ·±å…¥ç†è§£ TypeScript](https://jkchao.github.io/typescript-book-chinese/#why)

[å†´ç¾½-ts](https://github.com/mqyqingfeng/learn-typescript)

ts åŒæ—¶å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š
- é™æ€ç±»å‹æ£€æŸ¥(æ‰«æ)
- è¯­æ³•é™çº§
- ç¼–è¯‘è¾“å‡ºjs

ğŸ‘† æˆ‘ä»¬å‘ç°å’Œç°åœ¨ä¸€äº›å·¥å…·åŠŸèƒ½é‡å¤å¦‚ `ç¼–è¯‘-webpack`ã€`é™çº§-babel`

ä¸€èˆ¬çš„å‰ç«¯é¡¹ç›®éƒ½åªä½¿ç”¨ç±»å‹æ£€æŸ¥çš„åŠŸèƒ½(`tsc` é…ç½® `compilerOptions.noEmit = true` ,  `loader` æŠŠ `ts` è¯­æ³•ç§»é™¤è½¬ä¸º `js` )

è€Œjsåº“å¼€å‘åˆ™å¯èƒ½ä¼šä½¿ç”¨åˆ° tsc åšè½¬è¯‘æ‰“åŒ…åŠŸèƒ½(ä½†æ˜¯ `esbuild` æˆ–å…¶ä»–æ„å»ºå·¥å…· `tsup` è¿˜æ˜¯æ¯” `tsc` å¥½ç”¨ï¼Œé™¤éç‰¹åˆ«ç®€æ˜“çš„åº“æ‰“åŒ…å¯ä»¥ç”¨ `tsc`)

TS é¡¹ç›®å¼€å‘ä¸­çš„ ä¸€äº›æ¦‚å¿µï¼š
- æŠ¹é™¤(`esbuild`ã€`webpack-loader`) - æ— è§† `tsconfig` çš„ç¼–è¯‘é…ç½®ï¼Œä»…ä»…æŠŠ `TS` è½¬åŒ–ä¸º `JS`ï¼Œä¸åšä»»ä½•ç±»å‹æ£€æŸ¥ã€è¯­æ³•é™çº§ã€æ³¨é‡Šæ¸…é™¤
- ç±»å‹æ£€æŸ¥(`tsc`ã€`IDE`) - æ ¹æ® `tsconfig` å¯¹ `TS` åšé™æ€è¯­æ³•æ‰«æï¼Œä¸è¾“å‡ºJS æ–‡ä»¶(`noEmit`)
- è½¬è¯‘/ç¼–è¯‘(`tsc`) - æ ¹æ® `tsconfig` æŠŠ `TS` è½¬åŒ–ä¸º `JSï¼ŒåŒ…æ‹¬ç±»å‹æ£€æŸ¥å¹¶ä¸­æ–­æŠ¥é”™`

> åœ¨å¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬æ¨èä½ é  IDE æ¥è·å–å³æ—¶çš„ç±»å‹é”™è¯¯åé¦ˆ - [vue3æ–‡æ¡£](https://cn.vuejs.org/guide/typescript/overview.html#overview)


## å­¦ä¹ è·¯çº¿

å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼š
- [Everyday Types](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html) æ˜¯ TS çš„åŸºç¡€çŸ¥è¯†ï¼Œçœ‹å®Œåå¯ä»¥å†çœ‹çœ‹ [Cheat Sheets](https://www.typescriptlang.org/cheatsheets) ä¸­çš„ Interfaces å’Œ Types ä¸¤å¼ å›¾å›é¡¾ä¸€ä¸‹
- [Utility Types](https://www.typescriptlang.org/docs/handbook/utility-types.html) æ˜¯ TS è‡ªå¸¦çš„ä¸€äº›å·¥å…·ç±»å‹
- å½“ä½ å¸Œæœ›æ‰©å±•ç¬¬ä¸‰æ–¹åº“çš„ TS å®šä¹‰æ—¶ï¼Œéœ€è¦ç”¨åˆ° [Declaration Merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)
- å¦‚æœä½ æƒ³å†™ä¸€äº›ç±»å‹æ¨å¯¼ï¼Œé‚£ä¹ˆ [Type Manipulation](https://www.typescriptlang.org/docs/handbook/2/types-from-types.html) ä¸­çš„éƒ½è¦çœ‹çœ‹

çœ‹æ–‡æ¡£ï¼Œç„¶åå°±åšåš [type challenges](https://github.com/type-challenges/type-challenges) çš„é¢˜

## IDEå’ŒæŒ‡ä»¤æ‰§è¡Œç±»å‹æ£€æŸ¥

- å‘½ä»¤æ‰§è¡Œç±»å‹æ£€æŸ¥(ä¸è¾“å‡ºjs `noEmit`)ï¼Œç»“æœè¾“å‡ºåœ¨ç»ˆç«¯
- IDEæ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œç»“æœè¾“å‡ºåœ¨ä»£ç ä½ç½®

`typescript` å’Œ `eslint` å¾ˆåƒï¼Œé¡¹ç›®éœ€è¦ï¼š
1. å®‰è£…ä¾èµ–
2. é…ç½®æ–‡ä»¶
3. `IDE` å®‰è£… æ’ä»¶
4. å¯é€‰ æ¯æ¬¡ç¼–è¯‘è¿è¡Œ/ä»£ç æäº¤å‰hook  è¿›è¡Œé™æ€æ‰«ææ‹¦æˆª

æœ‰æ—¶å€™æˆ‘ä»¬å‘ç°å¯åŠ¨é¡¹ç›®æŠ¥é”™ `eslint/typescript`ï¼Œé‚£å°±æ˜¯å®‰è£…çš„ä¾èµ–è¢«è¿è¡Œæ‰«æç”Ÿæ•ˆ

å‡å¦‚æ­¤æ—¶ç¼–è¾‘å™¨åœ¨ä»£ç éƒ¨åˆ†æ²¡æœ‰ç›¸å…³çš„æç¤ºï¼Œé‚£å°±æ˜¯ `IDE` çš„æ’ä»¶æ²¡ç”Ÿæ•ˆï¼Œå¯ä»¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆ–å’Œä¾èµ–çš„ç‰ˆæœ¬æ˜¯å¦å¯¹åº”

ğŸ‘† å¯ä»¥çœ‹å‡º `IDE` å’Œ æŒ‡ä»¤ è™½ç„¶ä»ä½œç”¨ä¸Šæ¥è¯´æ˜¯ä¸€ä½“äº’ç›¸ååŠ©çš„ï¼Œä½†æ˜¯è¿è¡Œå´æ˜¯ç›¸äº’ç‹¬ç«‹çš„

ç†è®ºä¸Šï¼Œ `VSCode` çš„ä»£ç ç±»å‹æ£€æŸ¥æ˜¯è·Ÿé¡¹ç›®çš„ `typescript` å’Œ `tsconfig` å¼ºç›¸å…³çš„

ç°åœ¨é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š

> `tsconfig.json` é…ç½®äº† `exclude` ç›®å½•ï¼Œå¹¶ä¸”`exclude`ç›®å½•æ²¡æœ‰è¢«å¼•ç”¨ï¼Œä¸ºä»€ä¹ˆæˆ‘çš„ `VSCode` è¿˜æ˜¯å¯¹ `exclude`ç›®å½•ä¸‹çš„tsæ–‡ä»¶è¿›è¡Œäº†é™æ€ç±»å‹åˆ†æ?
>
> è€Œé…ç½® `compilerOptions` ç¼–è¯‘é€‰é¡¹çš„ `target` æ—¶ä¸º `ES5` æ—¶ï¼Œ`VSCode` å¯ä»¥æ­£ç¡®æ ¹æ® `tsconfig` æ¥æç¤ºæ—  `Promise` è¯­æ³•
>
> ä¹Ÿå°±æ˜¯ `VSCode` ä¼šè¯†åˆ« `tsconfig` çš„ `compilerOptionsï¼Œä½†æ˜¯ä¸è¯†åˆ«` `exclude` ï¼Ÿ


[tsconfig.json çš„è¡Œä¸º-æ·±å…¥ç†è§£ TypeScript](https://jkchao.github.io/typescript-book-chinese/faqs/tsconfig-behavior.html#ä¸ºä»€ä¹ˆæŠŠä¸€ä¸ªæ–‡ä»¶æ”¾å…¥ã€Œexcludeã€é€‰é¡¹ä¸­ï¼Œå®ƒä»ç„¶ä¼šè¢«ç¼–è¯‘å™¨é€‰ä¸­ï¼Ÿ) ï¼šè¢« `import` çš„æ–‡ä»¶ï¼Œ`exclude` ä¸ä¼šç”Ÿæ•ˆ

ğŸ‘‡ ChatGPTï¼š

> `VSCode` ç¼–è¾‘å™¨ä¼šä½¿ç”¨è‡ªå·±çš„é™æ€ç±»å‹æ£€æŸ¥å™¨æ¥æä¾›ç¼–è¾‘å™¨çº§åˆ«çš„ç±»å‹åˆ†æå’Œè‡ªåŠ¨å®ŒæˆåŠŸèƒ½
> 
> è™½ç„¶ `tsc` ä¸ä¼šç¼–è¯‘ `exclude` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä½†æ˜¯ `VSCode` ä»ç„¶ä¼šåŠ è½½è¿™äº›æ–‡ä»¶å¹¶å¯¹å…¶è¿›è¡Œé™æ€ç±»å‹åˆ†æï¼Œä»¥æä¾›æ›´å¥½çš„ `VSCode` æ”¯æŒå’Œä»£ç æç¤ºã€‚è¿™æ„å‘³ç€å³ä½¿ä½ åœ¨ç¼–è¯‘æ—¶æ’é™¤äº†è¿™äº›æ–‡ä»¶ï¼Œ `VSCode` ä»ç„¶ä¼šæ£€æŸ¥å®ƒä»¬å¹¶æä¾›ç›¸åº”çš„ç±»å‹æ£€æŸ¥åŠŸèƒ½ã€‚
 
> å¦‚æœä½ å¸Œæœ› `VSCode` å®Œå…¨å¿½ç•¥ `exclude` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä»¥å‡å°‘ `VSCode` çš„é™æ€ç±»å‹æ£€æŸ¥å·¥ä½œé‡ï¼Œä½ å¯ä»¥å°è¯•ä½¿ç”¨å…¶ä»–æ’ä»¶æˆ–é…ç½®æ¥å®ç°
> 
> ä¾‹å¦‚ï¼Œä¸€äº› `VSCode` æ’ä»¶å¯ä»¥æ ¹æ®æŒ‡å®šçš„æ–‡ä»¶è§„åˆ™æˆ–æ¨¡å¼æ¥æ’é™¤ç‰¹å®šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œè¿™æ · `VSCode` å°±ä¸ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ã€‚ä½ å¯ä»¥åœ¨ `VSCode` çš„æ’ä»¶å¸‚åœºä¸­æœç´¢ç›¸å…³çš„æ’ä»¶ï¼Œå¹¶æŒ‰ç…§æ’ä»¶çš„è¯´æ˜è¿›è¡Œé…ç½®

ğŸ¤”ï¸ ä¸å¤ªç¡®å®šï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ç”µè„‘ `IDE` çš„é—®é¢˜ï¼Œç†è®ºä¸Š `VSCode` ä¼šæ ¹æ® `exclude` é…ç½®å¿½ç•¥ç±»å‹æ£€æŸ¥

## ç°ä»£å‰ç«¯é¡¹ç›®çš„é€‰æ‹©

### Vite

åœ¨åŸºäº `Vite` çš„é…ç½®ä¸­ï¼Œ`å¼€å‘æœåŠ¡å™¨devServer` å’Œ `æ‰“åŒ…å™¨build` å°†åªä¼šå¯¹ `TypeScript` æ–‡ä»¶ï¼š
- æ‰§è¡Œ æŠ¹é™¤ (`esbuild`)
- è€Œä¸ä¼šæ‰§è¡Œ ç±»å‹æ£€æŸ¥

è¿™ä¿è¯äº† `Vite` å¼€å‘æœåŠ¡å™¨åœ¨ä½¿ç”¨ `TypeScript` æ—¶ä¹Ÿèƒ½å§‹ç»ˆä¿æŒé£å¿«çš„é€Ÿåº¦

å¦‚æœéœ€è¦ç±»å‹æ£€æŸ¥æ¥æ‹¦æˆªä»£ç æäº¤ï¼Œå¯ä»¥ä½¿ç”¨ `tsc` å‘½ä»¤æ‰§è¡Œç±»å‹æ£€æŸ¥(ä¸è¾“å‡ºjs `noEmit`)

è€Œ `Vue` å› ä¸ºæ˜¯ `.vue` æ–‡ä»¶è€Œä¸æ˜¯ tsæ–‡ä»¶ï¼Œå› æ­¤æä¾›ä¸€ä¸ª `vue-tsc` å‘½ä»¤å·¥å…·

> `vue-tsc` æ˜¯å¯¹ `TypeScript` è‡ªèº«å‘½ä»¤è¡Œç•Œé¢ `tsc` çš„ä¸€ä¸ªå°è£…ã€‚å®ƒçš„å·¥ä½œæ–¹å¼åŸºæœ¬å’Œ `tsc` ä¸€è‡´ã€‚å³ï¼šæ‰§è¡Œ `TS` ç¼–è¯‘(åªåšç±»å‹æ£€æŸ¥ä¹Ÿè¦æ‰§è¡Œç¼–è¯‘æŒ‡ä»¤`tsc`ï¼Ÿ)

> åœ¨ä»…æ‰§è¡Œ `TS` æŠ¹é™¤çš„é¡¹ç›®ä¸­ï¼Œå‡å¦‚é¢å¤–å¼€å¯ç±»å‹æ£€æŸ¥ï¼š
> 
> å¼€å¯ `Vite` å¼€å‘æœåŠ¡å™¨çš„åŒæ—¶ä»¥ä¾¦å¬æ¨¡å¼è¿è¡Œ `vue-tsc`
> 
> æˆ–æ˜¯ä½¿ç”¨ `vite-plugin-checker` è¿™æ ·åœ¨å¦ä¸€ä¸ª `worker` çº¿ç¨‹é‡Œåšé™æ€æ£€æŸ¥çš„æ’ä»¶
